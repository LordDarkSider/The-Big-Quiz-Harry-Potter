<!DOCTYPE html>
<html lang="fr">

	<head>
		<title>D√©fi n¬∞42 | The Big Quiz HP</title>
		<meta charset="utf-8">
        <meta name="description" content="D√©fi n¬∞42, The Big Quiz Harry Potter">
        <meta name="author" content="Titouan Hinschberger">
        <meta name="copyright" content="¬©2028 Titouan Hinschberger All rights reserved.">
        <link href="../ressources/style.css" rel="stylesheet" media="all">
        <link rel="icon" href="../ressources/images/quiz_icon.ico">
        <link rel="image_src" href="../ressources/images/quiz_icon.png">
	</head>
	
	<body>

        <h1>The Big Quiz Harry Potter</h1>

        <div id="infos">

            <h2>D√©fi n¬∞42</h2>

            <p id="warning">
                ‚ö†Ô∏èIl est n√©cessaire d'avoir lu le <a href="https://harrypotter.fandom.com/fr/wiki/Harry_Potter_et_les_Reliques_de_la_Mort" target="_blank">tome 7</a> pour r√©ussir ce d√©fi.
            </p>

            <p id="difficulty" title="2"></p> <!-- 1,2,3 ou 4 -->

            <p id="instruction">
                üëâ<u>Consigne :</u> Retrouver les tandems lors de la bataille des sept Potter.
            </p>

        </div>

		<div id="challenge">

            <form onChange="auto_replace(); change_key()">

                <table>

                    <thead> <th></th> <th>Sept Potter</th> <th>Gardes du corps</th> </thead>

                    <tr>
                        <td>‚Ä¢</td>
                        <td id="autofield1"></td>
                        <td id="autofield2"></td>
                    </tr>
                    
                    <tr>
                        <td>‚Ä¢</td>
                        <td id="autofield3"></td>
                        <td id="autofield4"></td>
                    </tr>
                    
                    <tr>
                        <td>‚Ä¢</td>
                        <td id="autofield5"></td>
                        <td id="autofield6"></td>
                    </tr>
                    
                    <tr>
                        <td>‚Ä¢</td>
                        <td id="autofield7"></td>
                        <td id="autofield8"></td>
                    </tr>
                    
                    <tr>
                        <td>‚Ä¢</td>
                        <td id="autofield9"></td>
                        <td id="autofield10"></td>
                    </tr>
                    
                    <tr>
                        <td>‚Ä¢</td>
                        <td id="autofield11"></td>
                        <td id="autofield12"></td>
                    </tr>
                    
                    <tr>
                        <td>‚Ä¢</td>
                        <td id="autofield13"></td>
                        <td id="autofield14"></td>
                    </tr>

                </table>

            </form>

		</div>

		<div id="solution">

            <p>
                üóùÔ∏è La cl√© est <span id="key">. . .</span><br>
                ‚úîÔ∏èAvec cette cl√© vous pourrez peut-√™tre ouvrir l'<a onclick="easter_egg('42')" title="T√©l√©charger l'Easter egg">Easter egg n¬∞42</a><br>
                ‚ö†Ô∏èIl peut contenir du SPOIL, il est recommand√© d'avoir vu avant le <a href="https://harrypotter.fandom.com/fr/wiki/Harry_Potter_et_les_Reliques_de_la_Mort_:_1%C3%A8re_partie" target="_blank"> film de la 1√®re partie du tome 7</a>
            </p>

		</div>

        <img class="icon" id="home" src="../ressources/images/home.png" alt="Accueil" title="Accueil" onclick="go_to('../index.html')">
        <img class="icon" id="last" src="../ressources/images/last.png" alt="Pr√©c√©dent" title="D√©fi pr√©c√©dent" onclick="go_to('41.html')">
        <img class="icon" id="next" src="../ressources/images/next.png" alt="Suivant" title="D√©fi suivant" onclick="go_to('43.html')">
        <img class="icon" id="music" src="../ressources/images/music-off.png" alt="Musique OFF" title="Activer la musique">



        <script>
            let nb_fields = 14;
            let music_src = "../ressources/music/HP7/Polyjuice Potion.mp3";

            //Ajout des select
            select_values = ["Ron Weasley", "George Weasley", "Fred Weasley", "Bill Weasley", "Arthur Weasley", "Nymphadora Tonks", "Kingsley Shacklebolt", "Harry Potter", "Alastor Maugrey", "Remus Lupin", "Rubeus Hagrid", "Hermione Granger", "Mondingus Fletcher", "Fleur Delacour"];
            var select = document.createElement('select');
            select.options[0] = new Option("‚Äé", "");
            while(select_values.length){
                    var val = select_values.pop();
                    select.options[select.options.length] = new Option(val, val);
            }
            for(let k=1; k<=nb_fields; k++){
                f = document.getElementById("autofield"+String(k));
                select.id = "v"+String(k);
                f.appendChild(select.cloneNode(true));
            }

        </script>

        <script src="../ressources/script/difficulty.js"></script>
        <script src="../ressources/script/keys.js"></script>
        <script src="../ressources/script/key_engine.js"></script>
        <script src="../ressources/script/links_easter_eggs.js"></script>
        <script src="../ressources/script/interactions.js"></script>
        <script src="../ressources/script/music.js"></script>

        <script>

            function auto_replace(){

                //V√©rifier que tout est compl√©t√© (sortir sinon)
                for (var i = fields.length-1; i >= 0; i--) {
                    if(fields[i].selectedIndex == 0) {return};
                }
                
                //R√©cup√©rer toutes les valeurs
                var slctIdx = fields.map(f => f.selectedIndex);

                //S√©parer valeurs √† gauche et valeurs associ√©es √† droite
                var left_values = [];
                var assoc = new Map();
                for (var i = 0; i < slctIdx.length; i += 2) {
                    left_values.push(slctIdx[i]);
                    assoc.set(slctIdx[i], slctIdx[i+1]);
                }

                //Trier les valeurs √† gauche
                left_values.sort(function(a,b){return a-b;});

                //Replacer les valeurs gauches et droites associ√©es
                for (var i = 0; i < left_values.length; i ++) {
                    fields[i*2].selectedIndex = left_values[i];
                    fields[(i*2)+1].selectedIndex = assoc.get(left_values[i]);
                }

            }

        </script>


	</body>

</html>